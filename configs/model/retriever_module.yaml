# configs/model/retriever_module.yaml

_target_: src.models.retriever_module.RetrieverModule

compile_model: false
compile_dynamic: true

retriever:
  _target_: src.models.components.retriever.Retriever
  emb_dim: 1024
  hidden_dim: 1024
  # Checkpoints（如 webqsp retriever 021）是在结构特征打开的情况下训练的，需保持一致维度。
  topic_pe: true
  dropout_p: 0.1

loss:
  _target_: src.losses.retriever_loss.RetrieverListwiseHardNegLoss
  temperature: 1.0
  listwise_weight: 1.0
  hard_neg_k: 64
  pairwise_margin: 1.0
  pairwise_weight: 1.0

optimizer:
  _target_: torch.optim.Adam
  _partial_: true
  lr: 1.0e-3
  weight_decay: 0.0
  betas: [0.9, 0.999]

# SubgraphRAG parity: no scheduler by default (optional via CLI override).
scheduler: null

evaluation_cfg:
  ranking_k: [1, 5, 10, 25, 50, 100, 200, 300, 400]
  answer_recall_k: [1, 5, 10, 25, 50, 100, 200, 300, 400]
