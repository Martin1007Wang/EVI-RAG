# @package _global_

defaults:
  - override /data: webqsp
  - override /model: evidential_vera
  - override /trainer: standard
  - override /logger: wandb

tags: ["webqsp", "vera", "hybrid"]

trainer:
  max_epochs: 200
  check_val_every_n_epoch: 10
  gradient_clip_val: 0.0
  enable_model_summary: false
  devices: 1

optimization:
  optimizer_cfg:
    type: adamw
    lr: 3.0e-4
    weight_decay: 0.01
  scheduler_cfg:
    type: cosine
    t_max: ${trainer.max_epochs}
    eta_min: 0.0

model:
  optimizer_cfg: ${optimization.optimizer_cfg}
  scheduler_cfg: ${optimization.scheduler_cfg}
  evaluation_cfg:
    ranking_k: [1, 10, 25, 50, 100, 200, 300, 400]
    answer_recall_k: [1, 10, 25, 50, 100, 200, 300, 400]
    partial_coverages: [0.05, 0.1, 0.2, 0.5, 0.7, 0.8, 0.9, 0.95]
    reliability_bins: 20
    selective_top_k: 1
    selective_concentration_offset: 3.4657359027997265
    selective_concentration_scale: 8.0
  loss_cfg:
    type: hybrid_vera
    temperature: 0.1
    rank_weight: 1.0
    cand_weight: 0.2
    query_weight: 0.5
    consistency_weight: 0.1
    alpha: 0.7
    beta: 1.0
    top_k: 1
    clamp_min: 1.0e-6
