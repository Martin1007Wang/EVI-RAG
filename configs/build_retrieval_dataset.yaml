defaults:
  - paths: default
  - dataset: webqsp
  - _self_

# Input directory, should match the output of build_retrieval_parquet.py
parquet_dir: ${dataset.out_dir}

# Output directory for LMDB and embeddings
output_dir: ${dataset.materialized_dir}

# HF model name or path for text encoding.
encoder: "Alibaba-NLP/gte-large-en-v1.5"

# Device for encoding (cuda or cpu).
device: "cuda"

# Batch size for text encoding.
batch_size: 64

# Show tqdm progress for long encoding phases (vocab encoding).
progress_bar: true

# Use FP16 for encoder forward pass.
fp16: False

# Number of topic feature channels used in preprocessing (topic_one_hot).
num_topics: ${dataset.num_topics}

# Supervision invariant: retriever labels are ALWAYS triple-level (positive_triple_mask).
# This removes ambiguous transition-lifting and enforces relation-sensitive training.

# LMDB map size in GB.
map_size_gb: 32

# LMDB map size for vocabulary (GB).
vocab_map_size_gb: 4

# Rebuild semantics: LMDB writes are not "incremental". If an LMDB already exists, we must
# overwrite it to avoid stale keys leaking into the current dataset build.
overwrite_lmdb: true

# Number of samples per LMDB transaction commit.
txn_size: 512

# Optional reproducibility controls.
seed: 42
deterministic: false
