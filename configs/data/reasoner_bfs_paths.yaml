# DataModule for reasoning over BFS-expanded chains from retriever outputs.
_target_: src.data.reasoner_path_datamodule.ReasonerPathDataModule

# Required paths (split-aware, eval_bfs/<split>.jsonl + <split>.manifest.json)
eval_cache_path: ${dataset.artifact_dir}/eval_bfs/${.split}.jsonl
entity_vocab_path: ${dataset.out_dir}/entity_vocab.parquet
relation_vocab_path: ${dataset.out_dir}/relation_vocab.parquet
g_agent_path: ${dataset.artifact_dir}/g_agent/${.split}_g_agent.pt
questions_path: ${dataset.out_dir}/questions.parquet
answer_text_field: answer_texts

# Metadata for downstream logging / naming
dataset: ${dataset.name}
split: ${run.split}
prompt_tag: bfs_paths
artifact_name: eval_bfs
schema_version: 1

# Chain filtering / prompt construction
max_chains_per_sample: 100
min_chain_length: 1
max_chain_length: null
include_meta: true
sort_by: ["-frequency", "-length"]
system_prompt: "You are a QA agent. Use the provided paths as evidence. Output JSON only."
user_instruction: "Return ONLY a valid JSON object with key \"answers\" and a list of strings. Example: {\"answers\": [\"Jamaican English\", \"Jamaican Creole English Language\"]}. If no answer, return {\"answers\": []}. Do not include any extra text, markdown, or additional keys. Copy entities exactly as they appear in the paths."

# Loader
num_workers: 0
